;输入两个二进制数相加，显示结果
S1	SEGMENT
DATA	DB	100H DUP(?)
CRLF	DB	0AH,0DH,24H
S1	ENDS

S2	SEGMENT   STACK
	DW   60H DUP(?)
TOS	LABEL  WORD
S2	ENDS

S3	SEGMENT
	ASSUME DS:S1,SS:S2,CS:S3
MAIN	PROC  FAR

	MOV AX,S1
	MOV DS,AX
	MOV AX,S2
	MOV SS,AX
	LEA SP,TOS

	MOV CX,2;要输入两个数
L0:	PUSH	CX
	MOV CX,16;长度为16的二进制数
	XOR BX,BX
L1:	MOV AH,01H
	INT 21H
	CMP AL,0DH;回车结束输入一个数
	JE	L2
	CMP AL,30H;输入为0或1
	JB	L1
	CMP AL,31H
	JA	L1
	AND AX,1;剩下最后一位
	SHL BX,1;上次输入结果左移
	ADD BX,AX;两次相加得最新二进制数
	LOOP	L1
	
L2:	POP CX
	PUSH BX
	LEA DX,CRLF;输出回车换行
	MOV AH,09H
	INT 21H
	LOOP L0
	
	POP BX
	MOV AX,BX
	POP BX
	ADD BX,AX;两个二进制数相加
	
	MOV CX,16;一位一位输出二进制数
	MOV AH,02H
L3:	ROL BX,1;移位先输出高位
	MOV DL,BL
	AND DL,1
	ADD	DL,30H;转换成ASCII码输出
	INT 21H
	LOOP L3
	
EXIT:	MOV	AH,4CH
	INT 	21H

MAIN	ENDP
	S3	ENDS
	END	MAIN