;在首地址为DATA 的字数组中，存放了100H个16位字数据，试编写一个程序，求出 它们的平均值放在AX寄存器中；并求出数组中有多少个数小于此平均值，将结果放在BX 寄存器中。（分别考虑有符号数、无符号数情况）
;---------------无符号----------------
S1	SEGMENT
DATA	DW	100 DUP(?)
LEN		EQU	($ - DATA)/2
S1	ENDS

S2	SEGMENT   STACK
	DW   60H DUP(?)
TOS	LABEL  WORD
S2	ENDS

S3	SEGMENT
	ASSUME DS:S1,SS:S2,CS:S3
MAIN	PROC  FAR
	MOV AX,S1
	MOV DS,AX
	MOV AX,S2
	MOV SS,AX
	LEA SP,TOS
	
	XOR AX,AX
	XOR DX,DX
	MOV	CX,LEN
	LEA	SI,DATA
LOP:ADD	AX,[SI]
	ADC	DX,0
	ADD SI,2
	LOOP LOP
	MOV	CX,LEN
	DIV	CX;结果存入AX
	
	XOR BX,BX
	LEA	SI,DATA
	CMP DX,0
	JE	LB2
LB:	CMP	AX,[SI]
	JA	NEXT;无符号数
	INC	BX
NEXT:	ADD SI,2
	LOOP LB
	
LB2:CMP	AX,[SI]
	JAE	NEXT2;无符号数
	INC	BX
NEXT2:	ADD SI,2
	LOOP LB2
	
EXIT:	MOV	AH,4CH
	INT 	21H
MAIN ENDP
S3	ENDS
	END	MAIN
;-----------------有符号--------------
S1	SEGMENT
DATA	DW	100 DUP(?)
LEN		EQU	($ - DATA)/2
S1	ENDS

S2	SEGMENT   STACK
	DW   60H DUP(?)
TOS	LABEL  WORD
S2	ENDS

S3	SEGMENT
	ASSUME DS:S1,SS:S2,CS:S3
MAIN	PROC  FAR
	MOV AX,S1
	MOV DS,AX
	MOV AX,S2
	MOV SS,AX
	LEA SP,TOS
	
	XOR AX,AX
	XOR DX,DX
	MOV	CX,LEN
	LEA	SI,DATA
LOP:ADD	AX,[SI]
	ADC	DX,0
	ADD SI,2
	LOOP LOP
	MOV	CX,LEN
	IDIV CX;结果存入AX
	
	XOR BX,BX
	LEA	SI,DATA
	CMP DX,0
	JE	LB2
LB:	CMP	AX,[SI]
	JG	NEXT
	INC	BX
NEXT:	ADD SI,2
	LOOP LB
	
LB2:CMP	AX,[SI]
	JGE	NEXT2
	INC	BX
NEXT2:	ADD SI,2
	LOOP LB2
	
EXIT:	MOV	AH,4CH
	INT 	21H
MAIN ENDP
S3	ENDS
	END	MAIN



