;在D盘根目录建立一个文件abc.txt，第1次向文件中写入“123456”六个字符，第2次 增加“abcdefg”几个字符
S1	SEGMENT
FNW		DB 'd:\abc.txt',0
FHW		DW	?
BUFFER1	DB	'1','2','3','4','5','6'
BUFFER2	DB	'a','b','c','d','e','f','g'
PRESS	DB	"PRESS ANY KEY TO CONTINUE",24H
S1	ENDS

S2	SEGMENT   STACK
	DW   60H DUP(?)
TOS	LABEL  WORD
S2	ENDS

S3	SEGMENT
	ASSUME DS:S1,SS:S2,CS:S3
MAIN	PROC  FAR
	MOV AX,S1
	MOV DS,AX
	MOV AX,S2
	MOV SS,AX
	LEA SP,TOS
	
	LEA	DX,FNW;建立文件
	MOV	AH,3CH
	MOV	CX,20H
	INT 21H
	JC	WRONG
	MOV	FHW,AX
	
	LEA	DX,BUFFER1;写文件
	MOV	BX,FHW
	MOV	CX,6
	MOV	AH,40H
	INT	21H
	JC	WRONG
	CMP	AX,6
	JB	WRONG
	
	LEA	DX,PRESS;暂停，按任意键继续
	MOV	AH,09H
	INT 21H
	MOV	AH,07H
	INT	21H
	
	
	LEA	DX,BUFFER2;写文件
	MOV	BX,FHW
	MOV	CX,6
	MOV	AH,40H
	INT	21H
	JC	WRONG
	CMP	AX,6
	JB	WRONG
	
WRONG:	MOV	AH,3EH
	MOV	BX,FHW
	INT	21H
	
EXIT:	MOV	AH,4CH
	INT 21H
MAIN ENDP
S3	ENDS
	END	MAIN